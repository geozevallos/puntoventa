(this["webpackJsonpreact-punto-de-venta"]=this["webpackJsonpreact-punto-de-venta"]||[]).push([[0],{150:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(32),s=a.n(n),r=a(13),i=a(15),o=Object(c.createContext)(),l=a(3),j=function(){var e=Object(c.useContext)(o),t=e.usu_nom,a=e.cerrarSesion;return Object(l.jsxs)("header",{class:"header",children:[Object(l.jsx)("div",{class:"header__logo",children:Object(l.jsx)("img",{src:"/imagenes/logo.svg",alt:""})}),Object(l.jsxs)("div",{class:"header__buscador",children:[Object(l.jsx)("img",{src:"/imagenes/search.svg",alt:""}),Object(l.jsx)("input",{type:"text",class:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(l.jsxs)("div",{class:"header__usuario",children:[Object(l.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(l.jsx)("span",{children:t}),Object(l.jsx)("button",{className:"btn btn-danger",onClick:function(){a()},children:"Cerrar Sesi\xf3n"})]})]})},d=a(10),b=a(12),u=a.n(b),O=a(18),m=a(19),h=a.n(m),p="https://codigo4-pos.herokuapp.com",x=function(){var e=Object(O.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(p,"/categoria"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(p,"/categoria/").concat(t,"/platos"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=a(9),_=Object(c.createContext)(),g=function(e){var t=e.objCategoria,a=Object(c.useContext)(_),n=a.objCategoriaGlobal,s=a.setObjCategoriaGlobal;return Object(l.jsxs)("li",{className:t.categoria_id===(null===n||void 0===n?void 0:n.categoria_id)?"active":"",onClick:function(){s(Object(v.a)({},t))},children:[Object(l.jsx)("img",{src:"/imagenes/plato_blanco.svg",alt:""}),Object(l.jsx)("span",{children:t.categoria_nom})]})},N=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){x().then((function(e){e.data.ok&&n(e.data.content)}))})),Object(l.jsx)("nav",{class:"menu",children:Object(l.jsx)("ul",{class:"menu__lista",children:a.map((function(e){return Object(l.jsx)(g,{objCategoria:e},e.categoria_id)}))})})},C=function(){var e=Object(O.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(p,"/mesa"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(p,"/mesa/").concat(t.mesa_id),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(p,"/mesa"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("".concat(p,"/mesa/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t=e.objMesa,a=Object(c.useContext)(_),n=a.objMesaGlobal,s=a.setObjMesaGlobal;return Object(l.jsxs)("li",{className:"mesas__mesa ".concat((null===n||void 0===n?void 0:n.mesa_id)===t.mesa_id?"activo":""),onClick:function(){s(Object(v.a)({},t))},children:[Object(l.jsx)("span",{class:"mesas__titulo",children:"Mesa"}),Object(l.jsx)("span",{class:"mesas__numero",children:t.mesa_nro})]})},M=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){C().then((function(e){e.data.ok&&n(e.data.content)}))})),Object(l.jsxs)("div",{class:"mesas",children:[Object(l.jsx)("ul",{class:"mesas__lista",children:a.map((function(e){return Object(l.jsx)(k,{objMesa:e},e.mesa_id)}))}),Object(l.jsx)("div",{class:"mesas__info"})]})},E=function(e){var t=e.objPlato,a=Object(c.useContext)(_).modificarPlatoContext;return Object(l.jsxs)("div",{className:"carta__plato",children:[Object(l.jsx)("img",{src:t.plato_img,alt:""}),Object(l.jsx)("h4",{className:"carta__titulo",children:t.plato_nom}),Object(l.jsx)("span",{className:"carta__precio",children:(+t.plato_pre).toFixed(2)}),Object(l.jsxs)("div",{className:"carta__botones",children:[Object(l.jsx)("button",{className:"boton boton-outline-primary boton-restar",onClick:function(){a(Object(v.a)({},t),"restar")},children:"-1"}),Object(l.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){a(Object(v.a)({},t),"sumar")},children:"+1"})]})]})},I=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useContext)(_).objCategoriaGlobal;return Object(c.useEffect)((function(){s&&f(s.categoria_id).then((function(e){e.data.ok&&n(e.data.content.Platos)}))}),[s]),Object(l.jsxs)("div",{class:"carta",children:[Object(l.jsxs)("h3",{children:["Lista de Platos Categoria: \xa0"," ",Object(l.jsx)("span",{class:"color-secundario",children:s?s.categoria_nom:"Seleccione una categoria"})]}),Object(l.jsx)("div",{class:"carta__platos",children:a.map((function(e){return Object(l.jsx)(E,{objPlato:e},e.plato_id)}))})]})},P=a(212),F=a(115),A=a.n(F),T=function(e){var t=e.mostrar,a=e.setMostrar,n=Object(c.useContext)(_),s=n.pedidos,r=n.objMesaGlobal,i=n.pagarContext,o=Object(c.useRef)(),j=s.find((function(e){return e.mesa_id===(null===r||void 0===r?void 0:r.mesa_id)}));return j?Object(l.jsxs)(P.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(l.jsx)(P.a.Header,{closeButton:!0,children:Object(l.jsx)(P.a.Title,{children:"Boleta"})}),Object(l.jsx)(P.a.Body,{children:Object(l.jsx)("div",{class:"container",ref:o,children:Object(l.jsx)("div",{class:"col-md-12",children:Object(l.jsxs)("div",{class:"invoice",children:[Object(l.jsx)("div",{class:"invoice-company text-inverse f-w-600",children:"Company Name, Inc"}),Object(l.jsxs)("div",{class:"invoice-header",children:[Object(l.jsxs)("div",{class:"invoice-from",children:[Object(l.jsx)("small",{children:"from"}),Object(l.jsxs)("address",{class:"m-t-5 m-b-5",children:[Object(l.jsx)("strong",{class:"text-inverse",children:"Twitter, Inc."}),Object(l.jsx)("br",{}),"Street Address",Object(l.jsx)("br",{}),"City, Zip Code",Object(l.jsx)("br",{}),"Phone: (123) 456-7890",Object(l.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(l.jsxs)("div",{class:"invoice-to",children:[Object(l.jsx)("small",{children:"to"}),Object(l.jsxs)("address",{class:"m-t-5 m-b-5",children:[Object(l.jsx)("strong",{class:"text-inverse",children:"Company Name"}),Object(l.jsx)("br",{}),"Street Address",Object(l.jsx)("br",{}),"City, Zip Code",Object(l.jsx)("br",{}),"Phone: (123) 456-7890",Object(l.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(l.jsxs)("div",{class:"invoice-date",children:[Object(l.jsx)("small",{children:"Invoice / July period"}),Object(l.jsx)("div",{class:"date text-inverse m-t-5",children:"August 3,2012"}),Object(l.jsxs)("div",{class:"invoice-detail",children:["#0000123DSS",Object(l.jsx)("br",{}),"Services Product"]})]})]}),Object(l.jsxs)("div",{className:"invoice-content",children:[Object(l.jsx)("div",{className:"table-responsive",children:Object(l.jsxs)("table",{className:"table table-invoice",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"TASK DESCRIPTION"}),Object(l.jsx)("th",{className:"text-center",children:"Cantidad"}),Object(l.jsx)("th",{className:"text-center",children:"Descripci\xf3n"}),Object(l.jsx)("th",{className:"text-right",children:"Precio Unitario"}),Object(l.jsx)("th",{className:"text-right",children:"Precio Total"})]})}),Object(l.jsx)("tbody",{children:j.platos.map((function(e,t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t+1}),Object(l.jsx)("td",{class:"text-center",children:e.plato_cant}),Object(l.jsx)("td",{class:"text-center",children:e.plato_nom}),Object(l.jsxs)("td",{class:"text-right",children:["S/",e.plato_pre]}),Object(l.jsxs)("td",{class:"text-right",children:["S/",+e.plato_pre*+e.plato_cant]})]},t)}))})]})}),Object(l.jsxs)("div",{class:"invoice-price",children:[Object(l.jsx)("div",{class:"invoice-price-left",children:Object(l.jsxs)("div",{class:"invoice-price-row",children:[Object(l.jsxs)("div",{class:"sub-price",children:[Object(l.jsx)("small",{children:"SUBTOTAL"}),Object(l.jsx)("span",{class:"text-inverse",children:"$4,500.00"})]}),Object(l.jsx)("div",{class:"sub-price",children:Object(l.jsx)("i",{class:"fa fa-plus text-muted"})}),Object(l.jsxs)("div",{class:"sub-price",children:[Object(l.jsx)("small",{children:"PAYPAL FEE (5.4%)"}),Object(l.jsx)("span",{class:"text-inverse",children:"$108.00"})]})]})}),Object(l.jsxs)("div",{class:"invoice-price-right",children:[Object(l.jsx)("small",{children:"TOTAL"})," ",Object(l.jsx)("span",{class:"f-w-600",children:"$4508.00"})]})]})]}),Object(l.jsxs)("div",{class:"invoice-note",children:["* Make all cheques payable to [Your Company Name]",Object(l.jsx)("br",{}),"* Payment is due within 30 days",Object(l.jsx)("br",{}),"* If you have any questions concerning this invoice, contact [Name, Phone Number, Email]"]}),Object(l.jsxs)("div",{class:"invoice-footer",children:[Object(l.jsx)("p",{class:"text-center m-b-5 f-w-600",children:"THANK YOU FOR YOUR BUSINESS"}),Object(l.jsxs)("p",{class:"text-center",children:[Object(l.jsxs)("span",{class:"m-r-10",children:[Object(l.jsx)("i",{class:"fa fa-fw fa-lg fa-globe"})," matiasgallipoli.com"]}),Object(l.jsxs)("span",{class:"m-r-10",children:[Object(l.jsx)("i",{class:"fa fa-fw fa-lg fa-phone-volume"})," ","T:016-18192302"]}),Object(l.jsxs)("span",{class:"m-r-10",children:[Object(l.jsx)("i",{class:"fa fa-fw fa-lg fa-envelope"})," rtiemps@gmail.com"]})]})]})]})})})}),Object(l.jsxs)(P.a.Footer,{children:[Object(l.jsx)("button",{className:"btn btn-success btn-lg",onClick:function(){i().then((function(e){e&&a(!1)}))},children:"PAGAR"}),Object(l.jsx)(A.a,{trigger:function(){return Object(l.jsx)("button",{className:"btn btn-primary btn-lg",children:"imprimir"})},content:function(){return o.current}})]})]}):null},R=function(e){var t=e.objItem;return Object(l.jsxs)("li",{class:"comanda__item",children:[Object(l.jsxs)("p",{class:"comanda__nombre",children:[Object(l.jsx)("span",{children:Object(l.jsx)("strong",{children:t.plato_nom})}),Object(l.jsxs)("span",{children:["Precio S/ ",t.plato_pre]})]}),Object(l.jsx)("p",{class:"comanda__cantidad",children:t.plato_cant}),Object(l.jsx)("p",{class:"comanda__precio",children:Object(l.jsxs)("strong",{children:["S/ ",t.plato_cant*+t.plato_pre]})})]})},B=function(){var e=Object(c.useContext)(_),t=e.pedidos,a=e.objMesaGlobal,n=Object(c.useState)(!1),s=Object(d.a)(n,2),r=s[0],i=s[1],o=[];if(a){var j=t.find((function(e){return e.mesa_id===a.mesa_id}));j&&(o=j.platos)}return Object(l.jsxs)("div",{class:"boleta",children:[Object(l.jsxs)("h3",{children:["Pedido Mesa: \xa0",Object(l.jsx)("span",{class:"color-secundario",children:a?a.mesa_nro:"Seleccione"})]}),Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{class:"comanda",children:[Object(l.jsx)("h4",{class:"comanda__mesa",children:a?"Mesa "+a.mesa_nro:"Seleccione"}),Object(l.jsx)("p",{class:"comanda__usuario",children:"Carlos Jimenez"}),Object(l.jsx)("hr",{}),Object(l.jsx)("ul",{class:"comanda__lista",children:o.map((function(e){return Object(l.jsx)(R,{objItem:e},e.plato_id)}))}),Object(l.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){i(!0)},children:"PAGAR"})]}),Object(l.jsx)(T,{mostrar:r,setMostrar:i})]})},D=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{}),Object(l.jsxs)("main",{class:"pos-container",children:[Object(l.jsx)(N,{}),Object(l.jsxs)("section",{class:"tabla",children:[Object(l.jsx)(M,{}),Object(l.jsxs)("div",{class:"pedido",children:[Object(l.jsx)(I,{}),Object(l.jsx)(B,{})]})]})]})]})},G=a(79),J=a(215),H=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(p,"/pedido"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(p,"/pedido"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=Object(c.useState)(null),a=Object(d.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(null),i=Object(d.a)(r,2),j=i[0],b=i[1],m=Object(c.useState)([]),h=Object(d.a)(m,2),p=h[0],x=h[1],f=Object(c.useContext)(o).usu_id,g=function(){var e=Object(O.a)(u.a.mark((function e(){var t,a,c,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),c=p.find((function(e){return n.mesa_id===e.mesa_id})),r=c.platos.map((function(e){return{plato_id:e.plato_id,pedidoplato_cant:e.plato_cant}})),i={pedido_fech:a,pedido_nro:Object(J.a)(),pedido_est:"pagado",usu_id:f,mesa_id:n.mesa_id,pedidoplatos:r},console.log(i),e.next=8,H(i);case 8:if(!e.sent.data.ok){e.next=14;break}return o=p.filter((function(e){return e.mesa_id!==n.mesa_id})),x(Object(G.a)(o)),s(null),e.abrupt("return",!0);case 14:case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(_.Provider,{value:{pagarContext:g,objMesaGlobal:n,objCategoriaGlobal:j,setObjCategoriaGlobal:b,setObjMesaGlobal:s,pedidos:p,modificarPlatoContext:function(e,t){var a=Object(G.a)(p);if(n){var c=a.find((function(e){return n.mesa_id===e.mesa_id}));if(c){var s=c.platos.findIndex((function(t){return t.plato_id===e.plato_id}));s>=0?"sumar"===t?(c.platos[s].plato_cant++,x(a)):c.platos[s].plato_cant>1?(c.platos[s].plato_cant--,x(a)):(c.platos.splice(s,1),0===c.platos.length&&(a=a.filter((function(e){return e.mesa_id!==n.mesa_id}))),x(a)):"sumar"===t&&(c.platos.push(Object(v.a)(Object(v.a)({},e),{},{plato_cant:1})),x(a))}else(t="sumar")&&(a.push({usu_id:0,mesa_id:n.mesa_id,pedido_est:"pendiente",platos:[Object(v.a)(Object(v.a)({},e),{},{plato_cant:1})]}),x(a))}}},children:e.children})},z=function(){return Object(l.jsx)(L,{children:Object(l.jsx)(i.d,{children:Object(l.jsx)(i.b,{path:"/pos/terminal",children:Object(l.jsx)(D,{})})})})},Y=(a(150),a(151),a(152),a(153),a(216)),q=a(214),$=a(213),K=a(118),W=a(211),Z=function(){return Object(l.jsxs)(Y.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(l.jsx)(Y.a.Brand,{href:"#home",children:"React-Bootstrap"}),Object(l.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(l.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(l.jsxs)(q.a,{className:"mr-auto",children:[Object(l.jsx)(r.c,{to:"/admin",className:"nav-link",activeClassName:"active",children:"Dashboard"}),Object(l.jsx)(r.c,{to:"/admin/mesa",className:"nav-link",activeClassName:"active",children:"Mesas"}),Object(l.jsx)(r.c,{to:"/admin/plato",className:"nav-link",activeClassName:"active",children:"Platos"}),Object(l.jsx)(r.c,{to:"/admin/plato",className:"nav-link",activeClassName:"active",children:"Pedidos"})]}),Object(l.jsxs)($.a,{inline:!0,children:[Object(l.jsx)(K.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(l.jsx)(W.a,{variant:"outline-success",children:"Search"})]})]})]})},V=a(119),Q=a.n(V),X=function(){var e=Object(c.useState)(0),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(0),r=Object(d.a)(s,2),i=r[0],o=r[1],j=Object(c.useState)(0),b=Object(d.a)(j,2),u=b[0],O=b[1],m=Object(c.useState)(0),h=Object(d.a)(m,2),x=h[0],f=h[1];return Object(c.useEffect)((function(){var e=Q()(p);return e.on("reporte-dashboard",(function(e){var t=JSON.parse(e);n(t.totales.mesas),o(t.totales.pedidos),O(t.totales.categorias),f(t.total_caja.totalMoney)})),e.emit("peticion-reporte-dashboard"),function(){e.disconnect()}}),[]),Object(l.jsxs)("main",{className:"container",children:[Object(l.jsx)("div",{className:"row mt-4",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("h1",{className:"display-3 text-center",children:"Dashboard Administrativo"})})}),Object(l.jsxs)("div",{className:"row mt-4",children:[Object(l.jsx)("div",{className:"col-md-4",children:Object(l.jsxs)("div",{className:"card shadow",children:[Object(l.jsx)("div",{className:"card-header",children:"Total de Mesas"}),Object(l.jsx)("div",{className:"card-body text-center",children:Object(l.jsx)("span",{className:"display-4",children:a})})]})}),Object(l.jsx)("div",{className:"col-md-4",children:Object(l.jsxs)("div",{className:"card shadow",children:[Object(l.jsx)("div",{className:"card-header",children:"Total de pedidos"}),Object(l.jsx)("div",{className:"card-body text-center",children:Object(l.jsx)("span",{className:"display-4",children:i})})]})}),Object(l.jsx)("div",{className:"col-md-4",children:Object(l.jsxs)("div",{className:"card shadow",children:[Object(l.jsx)("div",{className:"card-header",children:"Total de categor\xedas"}),Object(l.jsx)("div",{className:"card-body text-center",children:Object(l.jsx)("span",{className:"display-4",children:u})})]})})]}),Object(l.jsx)("div",{className:"row mt-4",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("div",{className:"card shadow",children:[Object(l.jsx)("div",{className:"card-header",children:"Total de ingresos"}),Object(l.jsx)("div",{className:"card-body text-center",children:Object(l.jsxs)("p",{className:"display-1",children:["S/ ",Object(l.jsx)("span",{children:x.toFixed(2)})," "]})})]})})})]})},ee=a(45),te=a(23),ae=function(e){var t=e.mostrarModalEditar,a=e.setMostrarModalEditar,n=e.objMesaEditar,s=e.traerMesas,r=Object(c.useState)(n),i=Object(d.a)(r,2),o=i[0],j=i[1],b=function(e){j(Object(v.a)(Object(v.a)({},o),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(c.useEffect)((function(){j(Object(v.a)({},n))}),[n]),Object(l.jsxs)(P.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(l.jsx)(P.a.Header,{closeButton:!0,children:Object(l.jsx)(P.a.Title,{children:"Editar Mesa"})}),Object(l.jsx)(P.a.Body,{children:n?Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y(o).then((function(e){e.data.ok&&(a(!1),s())}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Id:"}),Object(l.jsx)("input",{type:"text",className:"form-control",value:o.mesa_id})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Nro Mesa:"}),Object(l.jsx)("input",{type:"text",className:"form-control",value:o.mesa_nro,name:"mesa_nro",onChange:b})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Capacidad:"}),Object(l.jsx)("input",{type:"number",className:"form-control",value:o.mesa_cap,name:"mesa_cap",onChange:b})]}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Actualizar"})})]}):null})]})},ce=function(e){var t=e.mostrarModalCrear,a=e.setMostrarModalCrear,n=e.traerMesas,s=Object(c.useState)({mesa_nro:"",mesa_cap:0}),r=Object(d.a)(s,2),i=r[0],o=r[1],j=function(e){o(Object(v.a)(Object(v.a)({},i),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)(P.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(l.jsx)(P.a.Header,{closeButton:!0,children:Object(l.jsx)(P.a.Title,{children:"Crear Mesa"})}),Object(l.jsx)(P.a.Body,{children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S(i).then((function(e){e.data.ok&&(a(!1),o({mesa_nro:"",mesa_cap:0}),n())}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Nro Mesa:"}),Object(l.jsx)("input",{type:"text",className:"form-control",value:i.mesa_nro,name:"mesa_nro",onChange:j})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Capacidad:"}),Object(l.jsx)("input",{type:"number",className:"form-control",value:i.mesa_cap,name:"mesa_cap",onChange:j})]}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Crear"})})]})})]})},ne=a(78),se=a.n(ne),re=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),r=Object(d.a)(s,2),i=r[0],o=r[1],j=Object(c.useState)(!0),b=Object(d.a)(j,2),u=b[0],O=b[1],m=Object(c.useState)({columns:[{label:"#",field:"posicion"},{label:"Id",field:"mesa_id"},{label:"Nro mesa",field:"mesa_nro"},{label:"Capacidad",field:"mesa_cap"},{label:"Acciones",field:"acciones"}],rows:[]}),h=Object(d.a)(m,2),p=h[0],x=h[1],f=Object(c.useState)(null),_=Object(d.a)(f,2),g=_[0],N=_[1],y=Object(c.useState)(!0),S=Object(d.a)(y,2),k=S[0],M=S[1],E=function(e){se.a.fire({title:"\xbfSeguro que deseas eliminar la mesa?",text:"Los cambios ser\xe1n irreversibles",showCancelButton:!0,icon:"error"}).then((function(t){t.isConfirmed&&(w(e).then((function(e){e.data.ok&&se.a.fire({text:"Mesa eliminada correctamente",icon:"success",timer:1500})})),I())}))},I=function(){O(!0),C().then((function(e){if(e.data.ok){var t=e.data.content.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{mesa_cap:e.mesa_cap+" personas",posicion:t+1,acciones:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{className:"btn btn-warning",onClick:function(){N(Object(v.a)({},e)),n(!0)},children:"Editar"}),Object(l.jsx)("button",{className:"btn btn-danger",onClick:function(){E(e.mesa_id)},children:"Eliminar"})]})})}));k&&(x(Object(v.a)(Object(v.a)({},p),{},{rows:t})),O(!1))}}))};return Object(c.useEffect)((function(){return I(),function(){M(!1)}}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("main",{className:"container mt-5",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("div",{className:"card shadow",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){o(!0)},children:"Crear Mesa"}),Object(l.jsx)("hr",{}),u?Object(l.jsx)("div",{className:"alert alert-info",children:"Cargando"}):Object(l.jsx)(ee.c,{data:p})]})})})})}),Object(l.jsx)(ae,{mostrarModalEditar:a,setMostrarModalEditar:n,objMesaEditar:g,traerMesas:I}),Object(l.jsx)(ce,{mostrarModalCrear:i,setMostrarModalCrear:o,traerMesas:I})]})},ie=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1]),n=Object(c.useState)(!0),s=Object(d.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)({columns:[{label:"#",field:"posicion"},{label:"Id",field:"pedido_id"},{label:"Fecha",field:"pedido_fech"},{label:"Codigo",field:"pedido_nro"},{label:"Estado",field:"pedido_est"},{label:"Nro Mesa",field:"mesa_nro"},{label:"Usuario",field:"usu_nombre"},{label:"Acciones",field:"acciones"}],rows:[]}),j=Object(d.a)(o,2),b=j[0],u=j[1];return Object(c.useEffect)((function(){U().then((function(e){if(e.data.ok){var t=e.data.pedidos.map((function(e,t){var a,c,n;return Object(v.a)(Object(v.a)({},e),{},{posicion:t+1,mesa_nro:(null===(a=e.Mesa)||void 0===a?void 0:a.mesa_nro)||"S/N",usu_nombre:(null===(c=e.Usuario)||void 0===c?void 0:c.usu_nom)+" "+(null===(n=e.Usuario)||void 0===n?void 0:n.usu_ape)||"Sin Datos",acciones:Object(l.jsx)("button",{children:"Ver detalles"})})}));a(e.data.pedidos),u(Object(v.a)(Object(v.a)({},b),{},{rows:t})),i(!1)}else i(!1)})).catch((function(e){i(!1)}))}),[]),Object(l.jsxs)("main",{className:"container",children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("h1",{className:"display-4",children:"Lista de Pedidos"})})}),Object(l.jsx)("hr",{}),r?Object(l.jsx)("div",{className:"alert alert-info",children:Object(l.jsx)("h4",{children:"CARGANDO ..."})}):Object(l.jsx)(ee.c,{data:b})]})},oe=function(){var e=Object(O.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(p,"/plato"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(p,"/plato"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(O.a)(u.a.mark((function e(t,a){var c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("imagen",t),c.append("plato_id",a),e.next=5,h.a.post("".concat(p,"/plato/imagen/upload"),c,{headers:{"Content-type":"multipart/form-data"}});case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=function(){var e,t=Object(c.useState)({plato_nom:"",plato_img:"",plato_pre:0,categoria_id:0}),a=Object(d.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)([]),i=Object(d.a)(r,2),o=i[0],j=i[1],b=Object(c.useRef)();Object(c.useEffect)((function(){x().then((function(e){e.data.ok&&j(e.data.content)}))}),[]);var u=function(e){s(Object(v.a)(Object(v.a)({},n),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(l.jsx)("main",{className:"container mt-5",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("div",{className:"card shadow",children:[Object(l.jsx)("div",{className:"card-header",children:Object(l.jsx)("h4",{children:"Formulario de Creaci\xf3n de un Plato"})}),Object(l.jsx)("div",{className:"card-body",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),le(n).then((function(e){e.data.ok&&je(b.current.files[0],e.data.content.plato_id).then((function(e){console.log(e)}))}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(l.jsx)("input",{type:"text",className:"form-control",value:n.plato_nom,name:"plato_nom",onChange:u})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Precio:"}),Object(l.jsx)("input",{type:"number",className:"form-control",value:n.plato_pre,name:"plato_pre",onChange:u})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"",children:"Categoria"}),Object(l.jsxs)("select",(e={name:"",className:"form-control",value:n.categoria_id},Object(te.a)(e,"name","categoria_id"),Object(te.a)(e,"onChange",u),Object(te.a)(e,"children",[Object(l.jsx)("option",{value:"0",children:"Seleccione"}),o.map((function(e,t){return Object(l.jsx)("option",{value:e.categoria_id,children:e.categoria_nom},t)}))]),e))]}),Object(l.jsxs)("div",{className:"form-groups",children:[Object(l.jsx)("label",{htmlFor:"",children:"Imagen"}),Object(l.jsx)("input",{type:"file",className:"form-control",ref:b,accept:"image/*"})]}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Crear plato"})})]})})]})})})})},be={columns:[{label:"#",field:"posicion"},{label:"Id",field:"plato_id"},{label:"Nombre",field:"plato_nom"},{label:"Imagen",field:"plato_img"},{label:"Precio",field:"plato_pre"},{label:"Categoria",field:"categoria_nom"}],rows:[]},ue=function(e){var t=Object(c.useState)(!0),a=Object(d.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(be),o=Object(d.a)(i,2),j=o[0],b=o[1];return Object(c.useEffect)((function(){var e=!0;return oe().then((function(t){t.data.ok&&e&&(b(Object(v.a)(Object(v.a)({},be),{},{rows:t.data.content.map((function(e,t){var a;return{posicion:t+1,plato_id:e.plato_id,plato_nom:e.plato_nom,plato_img:Object(l.jsx)("img",{src:e.plato_img,width:"100"}),plato_pre:"S/ ".concat((+e.plato_pre).toFixed(2)),categoria_nom:(null===(a=e.Categorium)||void 0===a?void 0:a.categoria_nom)||"Sin Categor\xeda"}}))})),s(!1))})),function(){e=!1}}),[]),Object(l.jsx)("main",{className:"container mt-5",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("div",{className:"card shadow",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)(r.b,{className:"btn btn-primary",to:"/admin/plato/crear",children:"Crear Plato"}),Object(l.jsx)("hr",{}),n?Object(l.jsx)("div",{className:"alert alert-info",children:"Cargando"}):Object(l.jsx)(ee.c,{data:j})]})})})})})},Oe=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(Z,{}),Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{path:"/admin/mesa",children:Object(l.jsx)(re,{})}),Object(l.jsx)(i.b,{path:"/admin/plato",exact:!0,children:Object(l.jsx)(ue,{})}),Object(l.jsx)(i.b,{path:"/admin/plato/crear",exact:!0,children:Object(l.jsx)(de,{})}),Object(l.jsx)(i.b,{path:"/admin/pedido",children:Object(l.jsx)(ie,{})}),Object(l.jsx)(i.b,{path:"/admin",exact:!0,children:Object(l.jsx)(X,{})})]})]})},me=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(p,"/login"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(O.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(p,"/verificar"),null,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=Object(i.g)((function(e){var t=e.history,a=Object(c.useState)({correo:"",password:""}),n=Object(d.a)(a,2),s=n[0],r=n[1],i=Object(c.useContext)(o).iniciarSesionContext,j=function(e){r(Object(v.a)(Object(v.a)({},s),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(l.jsx)("main",{className:"login",children:Object(l.jsxs)("div",{className:"login__form",children:[Object(l.jsx)("h1",{children:"Inicio de Sesi\xf3n"}),Object(l.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),me(s).then((function(e){if(e.data.ok){i(e.data.token);var a=e.data.token.split(".")[1],c=atob(a);"admin"===JSON.parse(c).usu_tipo?t.push("/admin"):t.push("/pos/terminal")}}))},children:[Object(l.jsx)("label",{htmlFor:"",children:"Email:"}),Object(l.jsx)("input",{type:"email",class:"formulario__input",placeholder:"Email",name:"correo",onChange:j,value:s.correo}),Object(l.jsx)("label",{htmlFor:"",children:"Password:"}),Object(l.jsx)("input",{type:"password",className:"formulario__input",placeholder:"Password",name:"password",onChange:j,value:s.password}),Object(l.jsx)("button",{className:"formulario__submit",type:"submit",children:"Iniciar Sesi\xf3n"})]})]})})})),xe=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(i.d,{children:Object(l.jsx)(i.b,{path:"/auth/login",children:Object(l.jsx)(pe,{})})})})},fe=function(e,t){return"INICIAR_SESION"===t.action?Object(v.a)({},t.data):"CERRAR_SESION"===t.action?(localStorage.removeItem("token"),{autenticado:!1,cargando:!1,token:null,usu_nom:null,usu_id:null,usu_tipo:null}):void 0},ve={autenticado:!1,cargando:!0,token:null,usu_nom:null,usu_id:null,usu_tipo:null},_e=Object(i.g)((function(e){console.log(e);var t=Object(c.useReducer)(fe,ve),a=Object(d.a)(t,2),n=a[0],s=a[1],r=function(e){localStorage.setItem("token",e);var t=e.split(".")[1],a=atob(t),c=JSON.parse(a);s({action:"INICIAR_SESION",data:{autenticado:!0,cargando:!1,token:e,usu_nom:c.usu_nom,usu_id:c.usu_id,usu_tipo:c.usu_tipo}})};Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("token");e?he(e).then((function(t){t.data.ok&&r(e)})).catch((function(e){console.log(e),i()})):i()}()}),[]);var i=function(){s({action:"CERRAR_SESION"})};return Object(l.jsx)(o.Provider,{value:Object(v.a)({iniciarSesionContext:r,cerrarSesion:i},n),children:e.children})})),ge=function(e){console.log(e.path);var t=Object(c.useContext)(o),a=t.autenticado,n=t.cargando,s=t.usu_tipo;return n?Object(l.jsx)("div",{children:"Cargando joven..."}):a&&("admin"===s&&e.path.startsWith("/admin")||"ventas"===s&&e.path.startsWith("/pos"))?Object(l.jsx)(i.b,{path:e.path,children:e.children}):Object(l.jsx)(i.a,{to:"/"})},Ne=function(){return Object(l.jsx)("main",{className:"container-fluid",children:Object(l.jsxs)("div",{className:"row bg-dark justify-content-center align-items-center",style:{minHeight:"100vh"},children:[Object(l.jsx)("div",{className:"col-md-3",children:Object(l.jsx)(r.b,{to:"/admin",children:Object(l.jsx)("div",{className:"card p-5 bg-warning text-white",children:Object(l.jsx)("div",{className:"card-body",children:Object(l.jsx)("h4",{className:"display-4",children:"Admin"})})})})}),Object(l.jsx)("div",{className:"col-md-3",children:Object(l.jsx)(r.b,{to:"/pos/terminal",children:Object(l.jsx)("div",{className:"card p-5 bg-info text-white",children:Object(l.jsx)("div",{className:"card-body",children:Object(l.jsx)("h4",{className:"display-4",children:"Terminal POS"})})})})}),Object(l.jsx)("div",{className:"col-md-3",children:Object(l.jsx)(r.b,{to:"/auth/login",children:Object(l.jsx)("div",{className:"card p-5 bg-danger text-white",children:Object(l.jsx)("div",{className:"card-body",children:Object(l.jsx)("h4",{className:"display-4",children:"Login"})})})})})]})})},Ce=function(){return Object(l.jsx)(i.d,{children:Object(l.jsx)(i.b,{path:"/",children:Object(l.jsx)(Ne,{})})})},ye=function(){return Object(l.jsx)(r.a,{children:Object(l.jsx)(_e,{children:Object(l.jsxs)(i.d,{children:[Object(l.jsx)(ge,{path:"/pos",children:Object(l.jsx)(z,{})}),Object(l.jsx)(ge,{path:"/admin",children:Object(l.jsx)(Oe,{})}),Object(l.jsx)(i.b,{path:"/auth",children:Object(l.jsx)(xe,{})}),Object(l.jsx)(i.b,{path:"/",exact:!0,children:Object(l.jsx)(Ce,{})})]})})})};s.a.render(Object(l.jsx)(ye,{}),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.0e809ce3.chunk.js.map